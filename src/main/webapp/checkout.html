
<html>
<head>
    <title>Your Page</title>
    <!-- Add other head elements as needed -->
</head>
<body>

<!-- Your JSP content -->

<button id="paypalCheckoutButton">Checkout with PayPal</button>

<!-- Your other JSP content -->

<script>
    document.getElementById('paypalCheckoutButton').addEventListener('click', function () {
        // Make an AJAX request to your backend servlet
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/paypal-checkout', true);
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.onload = function () {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);

                if (response.approvalUrl) {
                    // Redirect the user to the PayPal approval URL
                    window.location.href = response.approvalUrl;
                } else {
                    // Handle the error
                    console.error(response.error);
                }
            } else {
                // Handle the error
                console.error('Error triggering PayPal checkout');
            }
        };

        xhr.send();
    });
</script>

</body>
</html>
